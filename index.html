<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8' />
  <title>USAID Where We Work</title>
  <!-- Add Mapbox GL JS JavaScript file -->
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js'></script>
  <!-- Add in the Mapbox GL JS CSS file -->
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css' rel='stylesheet' />
  <!-- Add CSS styling info for the map -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style type="text/css">
  /* Basic styling for Web page including structure and text */
  body {
    margin: 0;
    padding: 0;
  }

  h2,
  h3 {
    margin: 10px;
    font-size: 1.2em;
  }

  h3 {
    font-size: 1em;
  }

  p {
    font-size: 0.85em;
    margin: 10px;
    text-align: center;
  }

  img{
    border-radius: 10px;
  }

  /* Map Container */
  #map {
    position: absolute;
    top: 0px;
    bottom: 0;
    width: 100%;
  }

  /**
  * Determines how features will be displayed over map
  * including the "Where We Work" container */
  .map-overlay {
    position: absolute;
    bottom: 0;
    right: 0;
    background: #51535b;
    margin-right: 20px;
    font-family: sans-serif;
    color: #fff;
    overflow: auto;
    border-radius: 8px;
  }

  /* Feature Styling for anything over map including title, logo, etc */
  #features {
    bottom: 40px;
    height: 135px;
    margin-top: 20px;
    width: 250px;
    opacity: 0.75;
    text-align: center;
    font-size: 20px;
  }

  /* Title and Logo Container */
  .logo {
    position: absolute;
    top: 20px;
    left: 20px;
    margin-right: 20px;
    opacity: 0.95;
  }
  </style>
</head>

<body>
  <!-- Map div below to display mapbox basemap -->
  <div id='map'></div>
  <!--divs below for features like the USAID logo and Title and Information Container-->
  <div class='map-overlay' id='features'><br><h2>Where We Work</h2><div id='pd'><p>Hover over a country</p><br></div></div>
  <div class='logo'><img src="images/usaid_logo.png" alt="USAID" width="500px"></div>
  <script>
    // Add access token to display map
    mapboxgl.accessToken = 'pk.eyJ1IjoiY2F3aWxsaWFtcyIsImEiOiJja2xsZ3pxdmczaDZjMndxZXB2aXdrdTZ3In0.TBD0QCuYQMkeamI_srV2XQ';
    // Map Variable to add basemap designed using Mapbox Studio
    var map = new mapboxgl.Map({
      container: 'map', // map container id
      style: 'mapbox://styles/cawilliams/ckox99c0i0uii18lpofb2dbo5', // style link
      center: [-28.0791, 17.5454], // starting position [lng, lat]
      zoom: 5 // starting zoom
    });

    // Determines windoe in which map is zoomed out to
    map.on('load', function() {
      map.getCanvas().style.cursor = 'default';
      // set map bounds to focus on USAID country involvement
      map.fitBounds([
        [-116, 2],
        [123, 40]
        ]);

          // Add the information window for USAID - Where We Work
          // Thi
          map.on('mousemove', function(e) {
            var country = map.queryRenderedFeatures(e.point, {
              layers: ['usaid-countries-9smxff'] // data name when added to mapbox basemap in studio
              });

              if (country.length > 0) {
                document.getElementById('pd').innerHTML = '<h3><strong>' + country[0].properties.ADMIN ; // ADMIN is country name in dataset
                } else {
                  document.getElementById('pd').innerHTML = '<p>Hover over a country</p><br>'; // text when not hovering over USAID country
                  }
              });
          });

      // Add Zoom In/Out and North controls
      // Decided to not add geolocation as it is not necessary for this map
      map.addControl(new mapboxgl.NavigationControl(), 'bottom-left');
  </script>
</body>
